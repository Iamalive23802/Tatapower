<p-toast></p-toast>

<!-- Shift Info -->
<div style="margin-bottom: 1rem; padding: 0.5rem; background-color: #eff6ff; border: 1px solid #bfdbfe; border-radius: 0.375rem; font-size: 0.85rem; color: #1e40af;">
  <strong>Shift Information</strong><br />
  Shift Date: {{ shiftDate | date: 'dd/MM/yyyy' }}<br />
  Shift Name: {{ shiftName }}
</div>

<!-- BFP Unit 1,2 &3 -->
<p-panel header="BFP Unit 1,2 &3" [toggleable]="true" [collapsed]="true" [iconPos]="'start'">
  <table class="min-w-full text-xs border border-gray-300 border-collapse shadow" style="width:100%;table-layout:fixed;">
    <thead class="bg-gray-100 font-semibold text-gray-800">
      <tr>
        <th class="border p-2 text-center" style="width:20%;">Parameter</th>
        <th class="border p-2 text-center" style="width:7%;">Unit</th>
        <th class="border p-2 text-center" style="width:7%;">BFP1A</th>
        <th class="border p-2 text-center" style="width:7%;">BFP1B</th>
        <th class="border p-2 text-center" style="width:7%;">BFP1C</th>
        <th class="border p-2 text-center" style="width:7%;">BFP2A</th>
        <th class="border p-2 text-center" style="width:7%;">BFP2B</th>
        <th class="border p-2 text-center" style="width:7%;">BFP2C</th>
        <th class="border p-2 text-center" style="width:7%;">BFP3A</th>
        <th class="border p-2 text-center" style="width:7%;">BFP3B</th>
        <th class="border p-2 text-center" style="width:7%;">BFP3C</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td class="border p-2 text-center font-semibold">Status</td>
        <td class="border p-1"></td>
        <td class="border p-1"><p-dropdown [options]="pumpStatusOptions" [(ngModel)]="bfpStatus.bfp1a" placeholder="Select"></p-dropdown></td>
        <td class="border p-1"><p-dropdown [options]="pumpStatusOptions" [(ngModel)]="bfpStatus.bfp1b" placeholder="Select"></p-dropdown></td>
        <td class="border p-1"><p-dropdown [options]="pumpStatusOptions" [(ngModel)]="bfpStatus.bfp1c" placeholder="Select"></p-dropdown></td>
        <td class="border p-1"><p-dropdown [options]="pumpStatusOptions" [(ngModel)]="bfpStatus.bfp2a" placeholder="Select"></p-dropdown></td>
        <td class="border p-1"><p-dropdown [options]="pumpStatusOptions" [(ngModel)]="bfpStatus.bfp2b" placeholder="Select"></p-dropdown></td>
        <td class="border p-1"><p-dropdown [options]="pumpStatusOptions" [(ngModel)]="bfpStatus.bfp2c" placeholder="Select"></p-dropdown></td>
        <td class="border p-1"><p-dropdown [options]="pumpStatusOptions" [(ngModel)]="bfpStatus.bfp3a" placeholder="Select"></p-dropdown></td>
        <td class="border p-1"><p-dropdown [options]="pumpStatusOptions" [(ngModel)]="bfpStatus.bfp3b" placeholder="Select"></p-dropdown></td>
        <td class="border p-1"><p-dropdown [options]="pumpStatusOptions" [(ngModel)]="bfpStatus.bfp3c" placeholder="Select"></p-dropdown></td>
      </tr>
      <tr *ngFor="let row of bfpUnit1and2Arr">
        <td class="border p-2" style="width:20%; word-wrap:break-word;">{{ row.parameter }}</td>
        <td class="border p-2 text-center" style="width:7%;">{{ row.unit }}</td>
        <td class="border p-1"><input [(ngModel)]="bopObj[row.bfp1a]" class="w-full text-xs p-1 border rounded" /></td>
        <td class="border p-1"><input [(ngModel)]="bopObj[row.bfp1b]" class="w-full text-xs p-1 border rounded" /></td>
        <td class="border p-1"><input [(ngModel)]="bopObj[row.bfp1c]" class="w-full text-xs p-1 border rounded" /></td>
        <td class="border p-1"><input [(ngModel)]="bopObj[row.bfp2a]" class="w-full text-xs p-1 border rounded" /></td>
        <td class="border p-1"><input [(ngModel)]="bopObj[row.bfp2b]" class="w-full text-xs p-1 border rounded" /></td>
        <td class="border p-1"><input [(ngModel)]="bopObj[row.bfp2c]" class="w-full text-xs p-1 border rounded" /></td>
        <td class="border p-1"><input [(ngModel)]="bopObj[row.bfp3a]" class="w-full text-xs p-1 border rounded" /></td>
        <td class="border p-1"><input [(ngModel)]="bopObj[row.bfp3b]" class="w-full text-xs p-1 border rounded" /></td>
        <td class="border p-1"><input [(ngModel)]="bopObj[row.bfp3c]" class="w-full text-xs p-1 border rounded" /></td>
      </tr>
    </tbody>
  </table>
</p-panel>

<!-- ACW -->
<p-panel header="ACW Unit 1,2&3" [toggleable]="true" [collapsed]="true" [iconPos]="'start'" class="mt-4">
  <table class="min-w-full text-xs border border-gray-300 border-collapse shadow">
    <thead class="bg-gray-100 font-semibold text-gray-800">
      <tr>
        <th class="border p-2">Parameter</th>
        <th class="border p-2">Unit</th>
        <th class="border p-2">ACW1A</th>
        <th class="border p-2">ACW1B</th>
        <th class="border p-2">ACW2A</th>
        <th class="border p-2">ACW2B</th>
        <th class="border p-2">ACW3A</th>
        <th class="border p-2">ACW3B</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td class="border p-2 text-center font-semibold">Status</td>
        <td class="border p-1"></td>
        <td class="border p-1"><p-dropdown [options]="pumpStatusOptions" [(ngModel)]="acwStatus.acw1a" placeholder="Select"></p-dropdown></td>
        <td class="border p-1"><p-dropdown [options]="pumpStatusOptions" [(ngModel)]="acwStatus.acw1b" placeholder="Select"></p-dropdown></td>
        <td class="border p-1"><p-dropdown [options]="pumpStatusOptions" [(ngModel)]="acwStatus.acw2a" placeholder="Select"></p-dropdown></td>
        <td class="border p-1"><p-dropdown [options]="pumpStatusOptions" [(ngModel)]="acwStatus.acw2b" placeholder="Select"></p-dropdown></td>
        <td class="border p-1"><p-dropdown [options]="pumpStatusOptions" [(ngModel)]="acwStatus.acw3a" placeholder="Select"></p-dropdown></td>
        <td class="border p-1"><p-dropdown [options]="pumpStatusOptions" [(ngModel)]="acwStatus.acw3b" placeholder="Select"></p-dropdown></td>
      </tr>
  <tr *ngFor="let row of acwArr">
        <td class="border p-2">{{ row.parameter }}</td>
        <td class="border p-2">{{ row.unit }}</td>
        <td class="border p-1"><input [(ngModel)]="row.acw1a" type="number" class="w-full text-xs p-1 border rounded" /></td>
        <td class="border p-1"><input [(ngModel)]="row.acw1b" type="number" class="w-full text-xs p-1 border rounded" /></td>
        <td class="border p-1"><input [(ngModel)]="row.acw2a" type="number" class="w-full text-xs p-1 border rounded" /></td>
        <td class="border p-1"><input [(ngModel)]="row.acw2b" type="number" class="w-full text-xs p-1 border rounded" /></td>
        <td class="border p-1"><input [(ngModel)]="row.acw3a" type="number" class="w-full text-xs p-1 border rounded" /></td>
        <td class="border p-1"><input [(ngModel)]="row.acw3b" type="number" class="w-full text-xs p-1 border rounded" /></td>
  </tr>
  </tbody>
  </table>
  <!-- Booster Pump Status -->
  <table class="min-w-full text-xs border border-gray-300 border-collapse shadow mt-2">
    <thead class="bg-gray-100 font-semibold text-gray-800">
      <tr>
        <th class="border p-2"></th>
        <th class="border p-2 text-center">ACWB-1A</th>
        <th class="border p-2 text-center">ACWB-1B</th>
        <th class="border p-2 text-center">ACWB-2A</th>
        <th class="border p-2 text-center">ACWB-2B</th>
        <th class="border p-2 text-center">ACWB-3A</th>
        <th class="border p-2 text-center">ACWB-3B</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td class="border p-2 text-center">Booster Pump Status</td>
        <td class="border p-1"><p-dropdown [options]="pumpStatusOptions" [(ngModel)]="boosterPumpStatus.acwb1a" placeholder="Select"></p-dropdown></td>
        <td class="border p-1"><p-dropdown [options]="pumpStatusOptions" [(ngModel)]="boosterPumpStatus.acwb1b" placeholder="Select"></p-dropdown></td>
        <td class="border p-1"><p-dropdown [options]="pumpStatusOptions" [(ngModel)]="boosterPumpStatus.acwb2a" placeholder="Select"></p-dropdown></td>
        <td class="border p-1"><p-dropdown [options]="pumpStatusOptions" [(ngModel)]="boosterPumpStatus.acwb2b" placeholder="Select"></p-dropdown></td>
        <td class="border p-1"><p-dropdown [options]="pumpStatusOptions" [(ngModel)]="boosterPumpStatus.acwb3a" placeholder="Select"></p-dropdown></td>
        <td class="border p-1"><p-dropdown [options]="pumpStatusOptions" [(ngModel)]="boosterPumpStatus.acwb3b" placeholder="Select"></p-dropdown></td>
      </tr>
    </tbody>
  </table>
</p-panel>

<!-- CWP -->
<p-panel header="CWP" [toggleable]="true" [collapsed]="true" [iconPos]="'start'" class="mt-4">
  <table class="min-w-full text-xs border border-gray-300 border-collapse shadow">
    <thead class="bg-gray-100 font-semibold text-gray-800">
      <tr>
        <th class="border p-2">Parameter</th>
        <th class="border p-2">Unit</th>
        <th class="border p-2">CWPA</th>
        <th class="border p-2">CWPB</th>
        <th class="border p-2">CWPC</th>
        <th class="border p-2">CWPD</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let row of cwpArr">
        <td class="border p-2">{{ row.parameter }}</td>
        <td class="border p-2">{{ row.unit }}</td>
        <td class="border p-1"><input [(ngModel)]="row.cwpa" type="number" class="w-full text-xs p-1 border rounded" /></td>
        <td class="border p-1"><input [(ngModel)]="row.cwpb" type="number" class="w-full text-xs p-1 border rounded" /></td>
        <td class="border p-1"><input [(ngModel)]="row.cwpc" type="number" class="w-full text-xs p-1 border rounded" /></td>
        <td class="border p-1"><input [(ngModel)]="row.cwpd" type="number" class="w-full text-xs p-1 border rounded" /></td>
      </tr>
    </tbody>
  </table>
</p-panel>

<!-- CT Fans Status -->
<p-panel header="CT Fans Status" [toggleable]="true" [collapsed]="true" [iconPos]="'start'" class="mt-4">
  <table class="min-w-full text-xs border border-gray-300 border-collapse shadow">
    <thead class="bg-gray-100 font-semibold text-gray-800">
      <tr>
        <th class="border p-2">Name</th>
        <th class="border p-2">Status</th>
        <th class="border p-2">Current</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let fan of ctfansArr">
        <td class="border p-2">{{ fan.name }}</td>
        <td class="border p-1">
          <p-dropdown [options]="statusOptions" [(ngModel)]="fan.status" placeholder="Select"></p-dropdown>
        </td>
        <td class="border p-1"><input [(ngModel)]="fan.current" type="number" class="w-full text-xs p-1 border rounded" /></td>
      </tr>
    </tbody>
  </table>
</p-panel>

<!-- Valve Positions & Conductivity Parameters -->
<p-panel header="Valve Positions & Conductivity Parameters" [toggleable]="true" [collapsed]="true" [iconPos]="'start'" class="mt-4">
  <table class="min-w-full text-xs border border-gray-300 border-collapse shadow">
    <thead class="bg-gray-100 font-semibold text-gray-800">
      <tr>
        <th class="border p-2" rowspan="2">Unit</th>
        <th class="border p-2" colspan="2">CONDENSER CW O/L V/V POSITION</th>
      </tr>
      <tr>
        <th class="border p-2">LHS</th>
        <th class="border p-2">RHS</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let row of valvePosArr">
        <td class="border p-2">{{ row.unit }}</td>
        <td class="border p-1"><input [(ngModel)]="row.lhs" class="w-full text-xs p-1 border rounded" /></td>
        <td class="border p-1"><input [(ngModel)]="row.rhs" class="w-full text-xs p-1 border rounded" /></td>
      </tr>
    </tbody>
  </table>

  <table class="min-w-full text-xs border border-gray-300 border-collapse shadow mt-2">
    <thead class="bg-gray-100 font-semibold text-gray-800">
      <tr>
        <th class="border p-2">Parameter</th>
        <th class="border p-2">Limit</th>
        <th class="border p-2">Unit 1</th>
        <th class="border p-2">Unit 2</th>
        <th class="border p-2">Unit 3</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let row of conductivityArr">
        <td class="border p-2">{{ row.parameter }}</td>
        <td class="border p-2 text-center">{{ row.limit }}</td>
        <td class="border p-1"><input [(ngModel)]="row.unit1" type="number" class="w-full text-xs p-1 border rounded" /></td>
        <td class="border p-1"><input [(ngModel)]="row.unit2" type="number" class="w-full text-xs p-1 border rounded" /></td>
        <td class="border p-1"><input [(ngModel)]="row.unit3" type="number" class="w-full text-xs p-1 border rounded" /></td>
      </tr>
    </tbody>
  </table>
</p-panel>

<!-- Service Water Pump Status -->
<p-panel header="Service Water Pump Status" [toggleable]="true" [collapsed]="true" [iconPos]="'start'" class="mt-4">

  <table class="min-w-full text-xs border border-gray-300 border-collapse shadow mt-2">
    <thead class="bg-gray-100 font-semibold text-gray-800">
      <tr>
        <th class="border p-2">Tank Level</th>
        <th class="border p-2">Shift Start</th>
        <th class="border p-2">Shift End</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let item of serviceWaterPumpLevels">
        <td class="border p-2">{{ item.name }}</td>
        <td class="border p-1"><input [(ngModel)]="item.shiftstart" class="w-full text-xs p-1 border rounded" /></td>
        <td class="border p-1"><input [(ngModel)]="item.shiftend" class="w-full text-xs p-1 border rounded" /></td>
      </tr>
    </tbody>
  </table>
</p-panel>

<!-- Booster/Hotwell/Boiler Fill Pump & Compressor Status -->
<p-panel header="Pump & Compressor Status" [toggleable]="true" [collapsed]="true" [iconPos]="'start'" class="mt-4">


  <!-- Hotwell Pump Status -->
  <table class="min-w-full text-xs border border-gray-300 border-collapse shadow mt-2">
    <thead class="bg-gray-100 font-semibold text-gray-800">
      <tr>
        <th class="border p-2"></th>
        <th class="border p-2 text-center">HWP-1</th>
        <th class="border p-2 text-center">HWP-2</th>
        <th class="border p-2 text-center">HWP-3</th>
        <th class="border p-2 text-center">HWP-4</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td class="border p-2 text-center">Hotwell Pump Status</td>
        <td class="border p-1"><p-dropdown [options]="pumpStatusOptions" [(ngModel)]="hotwellPumpStatus.hwp1" placeholder="Select"></p-dropdown></td>
        <td class="border p-1"><p-dropdown [options]="pumpStatusOptions" [(ngModel)]="hotwellPumpStatus.hwp2" placeholder="Select"></p-dropdown></td>
        <td class="border p-1"><p-dropdown [options]="pumpStatusOptions" [(ngModel)]="hotwellPumpStatus.hwp3" placeholder="Select"></p-dropdown></td>
        <td class="border p-1"><p-dropdown [options]="pumpStatusOptions" [(ngModel)]="hotwellPumpStatus.hwp4" placeholder="Select"></p-dropdown></td>
      </tr>
    </tbody>
  </table>

  <!-- Boiler Fill Pump Status -->
  <table class="min-w-full text-xs border border-gray-300 border-collapse shadow mt-2">
    <thead class="bg-gray-100 font-semibold text-gray-800">
      <tr>
        <th class="border p-2"></th>
        <th class="border p-2 text-center">BOILER FILL P/P-1</th>
        <th class="border p-2 text-center">BOILER FILL P/P-2</th>
        <th class="border p-2 text-center">BOILER FILL P/P-3</th>
        <th class="border p-2 text-center">BOILER FILL P/P-4</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td class="border p-2 text-center">Boiler Fill Pump Status</td>
        <td class="border p-1"><p-dropdown [options]="pumpStatusOptions" [(ngModel)]="boilerFillPumpStatus.p1" placeholder="Select"></p-dropdown></td>
        <td class="border p-1"><p-dropdown [options]="pumpStatusOptions" [(ngModel)]="boilerFillPumpStatus.p2" placeholder="Select"></p-dropdown></td>
        <td class="border p-1"><p-dropdown [options]="pumpStatusOptions" [(ngModel)]="boilerFillPumpStatus.p3" placeholder="Select"></p-dropdown></td>
        <td class="border p-1"><p-dropdown [options]="pumpStatusOptions" [(ngModel)]="boilerFillPumpStatus.p4" placeholder="Select"></p-dropdown></td>
      </tr>
    </tbody>
  </table>

  <!-- Compressor Status -->
  <table class="min-w-full text-xs border border-gray-300 border-collapse shadow mt-2">
    <thead class="bg-gray-100 font-semibold text-gray-800">
      <tr>
        <th class="border p-2"></th>
        <th class="border p-2 text-center">COMPRESSOR-A</th>
        <th class="border p-2 text-center">COMPRESSOR-B</th>
        <th class="border p-2 text-center">COMPRESSOR-C</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td class="border p-2 text-center">Compressor Status</td>
        <td class="border p-1"><p-dropdown [options]="pumpStatusOptions" [(ngModel)]="compressorStatus.compA" placeholder="Select"></p-dropdown></td>
        <td class="border p-1"><p-dropdown [options]="pumpStatusOptions" [(ngModel)]="compressorStatus.compB" placeholder="Select"></p-dropdown></td>
        <td class="border p-1"><p-dropdown [options]="pumpStatusOptions" [(ngModel)]="compressorStatus.compC" placeholder="Select"></p-dropdown></td>
      </tr>
    </tbody>
  </table>
</p-panel>

<!-- Room Temperatures & Tank Levels -->
<p-panel header="Tank Levels & Room Temperatures" [toggleable]="true" [collapsed]="true" [iconPos]="'start'" class="mt-4">
  <table class="min-w-full text-xs border border-gray-300 border-collapse shadow">
    <thead class="bg-gray-100 font-semibold text-gray-800">
      <tr>
        <th class="border p-2">Name</th>
        <th class="border p-2">Reading</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let row of roomTempsArr">
        <td class="border p-2">{{ row.name }}</td>
        <td class="border p-1"><input [(ngModel)]="row.temp" type="number" class="w-full text-xs p-1 border rounded" /></td>
      </tr>
    </tbody>
  </table>
</p-panel>

<!-- Save Button -->
<div class="mt-4 text-center">
  <button pButton type="button" label="Save" class="p-button-success" (click)="insertFunc()"></button>
</div>
